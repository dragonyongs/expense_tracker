import React, { useState } from 'react'
import { LuBuilding, LuSmartphone, LuHome, LuCalendarDays } from "react-icons/lu";
import { AiOutlineMail } from "react-icons/ai";
import { LiaFaxSolid } from "react-icons/lia";
import { TbUserEdit } from "react-icons/tb";
import { RiSignpostLine } from "react-icons/ri";
import Avatar, { genConfig } from 'react-nice-avatar';
import ProfileDrawer from '../components/ProfileDrawer';
import InputField from '../components/InputField';

const randomColor = () => {
    const letters = '0123456789ABCDEF';
    let color = '#';
    for (let i = 0; i < 6; i++) {
        color += letters[Math.floor(Math.random() * 16)];
    }
    return color;
};

const Profile = () => {
    const [isOpen, setIsOpen] = useState(false);
    const [profile, setProfile] = useState({sample: "sample"});

    // ÏïÑÎ∞îÌÉÄ ÏÑ§Ï†ï ÏÉÅÌÉú
    const [avatarConfig, setAvatarConfig] = useState({
        sex: 'man',
        faceColor: randomColor(),
        earSize: 'small',
        hairColor: randomColor(),
        hairStyle: 'normal',
        hatColor: randomColor(),
        hatStyle: 'none',
        eyeStyle: 'circle',
        glassesStyle: 'none',
        noseStyle: 'short',
        mouthStyle: 'laugh',
        shirtStyle: 'hoody',
        shirtColor: randomColor(),
        bgColor: randomColor(),
        isGradient: false,
    });
    
    const stylesConfig = {
 	   hairStyle: ['normal', 'thick', 'mohawk', 'womanLong', 'womanShort'],
  	   hatStyle: ['none', 'beanie', 'turban'],
   	   eyeStyle: ['circle', 'oval', 'smile'],
       noseStyle: ['short', 'long', 'round'],
       mouthStyle: ['laugh', 'smile', 'peace'],
       shirtStyle: ['hoody', 'short', 'polo'],
	};

{/*
    const handleChange = (key, value) => {
        console.log(key,value)
        setAvatarConfig({ ...avatarConfig, [key]: value });
    };
*/}
    const randomizeColor = (key) => {
        setAvatarConfig({ ...avatarConfig, [key]: randomColor() });
    };
    
    const handleStyleChange = (styleKey) => {
        const currentStyle = avatarConfig[styleKey];
        const styleOptions = stylesConfig[styleKey];
        const currentIndex = styleOptions.indexOf(currentStyle);
        const nextIndex = (currentIndex + 1) % styleOptions.length;
        const nextStyle = styleOptions[nextIndex];

        setAvatarConfig((prevConfig) => ({
            ...prevConfig,
            [styleKey]: nextStyle,
        }));
    };
    
    const handleStyleAndColorChange = (styleKey, colorKey) => {
    	const currentStyle = avatarConfig[styleKey];
    	const styleOptions = stylesConfig[styleKey];
    	const currentIndex = styleOptions.indexOf(currentStyle);
    	const nextIndex = (currentIndex + 1) % styleOptions.length;
    	const nextStyle = styleOptions[nextIndex];

    	setAvatarConfig((prevConfig) => ({
           ...prevConfig,
          [styleKey]: nextStyle,
          [colorKey]: randomColor(),  // ÏÉâÏÉÅ ÎûúÎç§Ìôî
        }));
	};

{/*
    const handleStyleAndColorChange = (styleKey, styleValue, colorKey) => {
        setAvatarConfig((prevConfig) => ({
            ...prevConfig,
            [styleKey]: styleValue,
            [colorKey]: randomColor(),  // ÏÉâÏÉÅ ÎûúÎç§Ìôî
        }));
    };
*/}
    const generateRandomAvatar = () => {
        setAvatarConfig(genConfig()); // Ï†ÑÏ≤¥ ÎûúÎç§ ÏÑ§Ï†ï Î∂àÎü¨Ïò§Í∏∞
    };
    
    const renderStyleButton = (styleKey, label) => (
        <button 
            onClick={() => handleStyleChange(styleKey)} 
            className="px-4 py-2 bg-white border border-gray-400 text-gray-600 rounded-md dark:bg-slate-600 dark:border-transparent dark:text-slate-400"
        >
            {label}
        </button>
    );

    const renderStyleAndColorButton = (styleKey, colorKey, label) => (
       <button 
           onClick={() => handleStyleAndColorChange(styleKey, colorKey)} 
           className="px-4 py-2 bg-white border border-gray-400 text-gray-600 rounded-md dark:bg-slate-600 dark:border-transparent dark:text-slate-400"
        >
            {label}
        </button>
    );

    const handleOpenDrawer = () => {
        setIsOpen(true);
    };

    const handleCloseDrawer = () => {
        setIsOpen(false);
    };

    return (
        <>
            <header className={`flex justify-between items-center py-4 pl-6 pr-3 dark:text-white dark:bg-slate-800 dark:text-slate-200'}`}>
                <div className='text-2xl' >
                    <span className='font-semibold'>ÌîÑÎ°úÌïÑ</span>
                </div>
                <button className='flex justify-center p-3 dark:text-slate-300 rounded-md active:bg-gray-100 active:text-gray-400 dark:active:bg-slate-600 dark:active:text-slate-400' onClick={handleOpenDrawer}><TbUserEdit className='w-6 h-6'/></button>
            </header>
            <div className='flex flex-col gap-y-3 px-4 pb-4 dark:bg-slate-800'>

                <div className='relative flex flex-col gap-y-4 p-6 w-full bg-white rounded-lg shadow-sm'>
                    <div className='absolute top-6 right-6 text-md text-slate-500'>
                        ÏûÖÏÇ¨ NÎÖÑÏ∞®
                    </div>
                    <div className='flex justify-center items-center w-24 h-24 bg-slate-100 rounded-xl overflow-hidden'>
                        <Avatar className="w-full h-full rounded-none" style={{borderRadius: 'none'}} {...avatarConfig} />
                    </div>
                    <div className='font-bold text-3xl'>
                        ÌôçÍ∏∏Îèô
                    </div>

                    <div>
                        <p className='text-slate-800'>
                            1900.00.00(Ïñë) üéÇ
                        </p>
                        <p className='text-slate-500'><span className='font-semibold text-slate-800'>StarRich Advisor</span> ÌçºÎ∏îÎ¶¨Ïã±ÌåÄ ÌåÄÏû•</p>
                        <p className='text-slate-500'>What is good today, may be a cliche tomorrow.</p>
                    </div>
                    <div>
                        <div className='flex items-center gap-x-2'>
                            <LuSmartphone /> <p className='font-normal text-lg'>010-0000-0000</p>
                        </div>
                        <div className='flex items-center gap-x-2'>
                            <AiOutlineMail /> <p className='font-normal text-lg'>myemail@starrih.co.kr</p>
                        </div>
                    </div>
                    <div className='flex gap-x-3 mt-4'>
                        <button className='w-full py-3 border border-blue-700 font-semibold text-blue-700 rounded-md active:bg-blue-50 active:border-blue-100 active:text-blue-400 disabled:border-slate-300 disabled:text-slate-400 disabled:bg-slate-100' disabled>Ïù¥ÎØ∏ÏßÄ Ï†ÄÏû•</button>
                        <button className='w-full py-3 border border-blue-700 font-semibold text-blue-700 rounded-md active:bg-blue-50 active:border-blue-100 active:text-blue-400 disabled:border-slate-300 disabled:text-slate-400 disabled:bg-slate-100' disabled>QR Ïó∞ÎùΩÏ≤ò</button>
                    </div>
                </div>

                <div className='space-y-4 bg-white p-4 rounded-lg shadow-sm'>
                    <ul role="list" className="divide-y divide-gray-200">
                        <li className='flex items-center gap-x-4 py-3 sm:py-4'>
                            <div className='flex items-center space-x-2 px-2 font-semibold'>
                                <LuBuilding /><span className='w-10 text-nowrap'>ÌöåÏÇ¨</span>
                            </div>
                            <span className=''>02-0000-0000 (155)</span>
                        </li>
                        <li className='flex items-center gap-x-4 py-3 sm:py-4'>
                            <div className='flex items-center space-x-2 px-2 font-semibold'>
                                <LuSmartphone /><span className='w-10 text-nowrap'>ÏóÖÎ¨¥</span>
                            </div>
                            <span className=''>010-0000-0000</span>
                        </li>
                        <li className='flex items-center gap-x-4 py-3 sm:py-4'>
                            <div className='flex items-center space-x-2 px-2 font-semibold'>
                                <LuSmartphone /><span className='w-10 text-nowrap'>Í∞úÏù∏</span>
                            </div>
                            <span className=''>010-0000-0000</span>
                        </li>
                        <li className='flex items-center gap-x-4 py-3 sm:py-4'>
                            <div className='flex items-center space-x-2 px-2 font-semibold'>
                                <LiaFaxSolid /><span className='w-10 text-nowrap'>Ìå©Ïä§</span>
                            </div>
                            <span className=''>02-569-8470</span>
                        </li>
                    </ul>
                </div>

                <div className='space-y-4 bg-white p-4 rounded-lg shadow-sm'>
                    <ul role="list" className="divide-y divide-gray-200">
                        <li className='flex items-center gap-x-4 py-3 sm:py-4'>
                            <div className='flex items-center space-x-2 px-2 font-semibold'>
                                <LuBuilding /><span className='w-7 text-nowrap'>ÌöåÏÇ¨</span>
                            </div>
                            <span className=''>ÏÑúÏö∏Ïãú Í∞ïÎÇ®Íµ¨ Í∞ïÎÇ®ÎåÄÎ°ú62Í∏∏ 23, Ïó≠ÏÇºÎπåÎî© 3Ï∏µ</span>
                        </li>
                        <li className='flex items-center gap-x-4 py-3 sm:py-4'>
                            <div className='flex items-center space-x-2 px-2 font-semibold'>
                                <LuHome /><span className='w-7 text-nowrap'>Ïßë</span>
                            </div>
                            <span className=''>ÏÑúÏö∏Ïãú ÎèôÎåÄÎ¨∏Íµ¨ ÏïΩÎ†πÏãúÎ°ú00Í∏∏ 00, 0Îèô 000Ìò∏(Ï≤≠ÎüâÎ¶¨Îèô)</span>
                        </li>
                        <li className='flex items-center gap-x-4 py-3 sm:py-4'>
                            <div className='flex items-center space-x-2 px-2 font-semibold'>
                                <RiSignpostLine /><span className='w-7 text-nowrap'>ÌÉùÎ∞∞</span>
                            </div>
                            <span className=''>ÏÑúÏö∏Ïãú Í∞ïÎÇ®Íµ¨ Í∞ïÎÇ®ÎåÄÎ°ú62Í∏∏ 3, ÌïúÏßÑÎπåÎî© 5Ï∏µ</span>
                        </li>
                    </ul>
                </div>

                <div className='space-y-4 bg-white p-4 rounded-lg shadow-sm'>
                    <ul role="list" className="divide-y divide-gray-200">
                        <li className='flex items-center gap-x-4 py-3 sm:py-4'>
                            <div className='flex items-center space-x-2 px-2 font-semibold'>
                                <LuCalendarDays /><span className='w-7 text-nowrap'>ÏûÖÏÇ¨</span>
                            </div>
                            <span className=''>2017ÎÖÑ 2Ïõî 1Ïùº</span>
                        </li>
                        <li className='flex items-center gap-x-4 py-3 sm:py-4'>
                            <div className='flex items-center space-x-2 px-2 font-semibold'>
                                <LuCalendarDays /><span className='w-7 text-nowrap'>Ìá¥ÏÇ¨</span>
                            </div>
                            <span className=''>2022ÎÖÑ 3Ïõî 30Ïùº</span>
                        </li>
                        <li className='flex items-center gap-x-4 py-3 sm:py-4'>
                            <div className='flex items-center space-x-2 px-2 font-semibold'>
                                <LuCalendarDays /><span className='w-7 text-nowrap'>Ïû¨ÏûÖÏÇ¨</span>
                            </div>
                            <span className=''>2022ÎÖÑ 10Ïõî 2Ïùº</span>
                        </li>
                    </ul>
                </div>
            </div>

            <ProfileDrawer
                isOpen={isOpen}
                title={"ÌîÑÎ°úÌïÑ ÏàòÏ†ï"}
                onClose={handleCloseDrawer}
                >
                {/* ÏïÑÎ∞îÌÉÄ ÎØ∏Î¶¨Î≥¥Í∏∞ Î∞è ÏÑ§Ï†ï */}
                <div className="flex flex-col items-center mb-4">
                    {/* ÏïÑÎ∞îÌÉÄ ÎØ∏Î¶¨Î≥¥Í∏∞ */}
                    <Avatar className="w-24 h-24" {...avatarConfig} />
                    
                    <div className="flex gap-2 mt-4 flex-wrap justify-start mb-4">
                        <button onClick={generateRandomAvatar} className="px-4 py-2 bg-white border border-blue-500 text-blue-600 rounded-md dark:bg-slate-600 dark:border-transparent dark:text-slate-400">
                            ÎûúÎç§
                        </button>
                        <button onClick={() => randomizeColor('faceColor')} className="px-4 py-2 bg-white border border-gray-400 text-gray-600 rounded-md dark:bg-slate-600 dark:border-transparent dark:text-slate-400">
                            ÌîºÎ∂Ä
                        </button>
                        {renderStyleButton('earSize', 'Í∑Ä')}
                        {renderStyleAndColorButton('hairStyle', 'hairColor', 'Ìó§Ïñ¥')}
                        {renderStyleAndColorButton('hatStyle', 'hatColor', 'Î™®Ïûê')}
                        {renderStyleButton('eyeStyle', 'Îàà')}
                        {renderStyleButton('noseStyle', 'ÏΩî')}
                        {renderStyleButton('mouthStyle', 'ÏûÖ')}
                        {renderStyleAndColorButton('shirtStyle', 'shirtColor', 'ÏÖîÏ∏†')}
                        <button onClick={() => randomizeColor('bgColor')} className="px-4 py-2 bg-white border border-gray-400 text-gray-600 rounded-md dark:bg-slate-600 dark:border-transparent dark:text-slate-400">
                            Î∞∞Í≤Ω
                        </button>
                    </div>
                    
                    {/* ÏïÑÏù¥ÏΩò Î≤ÑÌäº */}
                    {/*
                    <div className="flex gap-2 mt-4 flex-wrap justify-start mb-4">
                        <button onClick={generateRandomAvatar} className="px-4 py-2 bg-white border border-blue-500 text-blue-600 rounded-md dark:bg-slate-600 dark:border-transparent dark:text-slate-400">
                            ÎûúÎç§
                        </button>
                        
                        <button onClick={() => randomizeColor('faceColor')} className="px-4 py-2 bg-white border border-gray-400 text-gray-600 rounded-md dark:bg-slate-600 dark:border-transparent dark:text-slate-400">
                            ÌîºÎ∂Ä
                        </button>
                        <button onClick={() => handleChange('earSize', avatarConfig.earSize === 'small' ? 'big' : 'small')} className="px-4 py-2 bg-white border border-gray-400 text-gray-600 rounded-md dark:bg-slate-600 dark:border-transparent dark:text-slate-400">
                            Í∑Ä
                        </button>
                        */}
                        {/* Ìó§Ïñ¥ Ïä§ÌÉÄÏùºÍ≥º ÏÉâÏÉÅ Î≥ÄÍ≤Ω */}
                        {/*
                        <button 
                            onClick={() => handleStyleAndColorChange(
                                'hairStyle', 
                                avatarConfig.hairStyle === 'normal' ? 'thick' : 
                                avatarConfig.hairStyle === 'thick' ? 'mohawk' : 
                                'normal', 
                                'hairColor' // Ìó§Ïñ¥ ÏÉâÏÉÅÎèÑ Ìï®Íªò ÎûúÎç§Ìôî
                            )} 
                            className="px-4 py-2 bg-white border border-gray-400 text-gray-600 rounded-md dark:bg-slate-600 dark:border-transparent dark:text-slate-400"
                        >
                            Ìó§Ïñ¥
                        </button>
                        */}
                        {/* Î™®Ïûê Ïä§ÌÉÄÏùºÍ≥º ÏÉâÏÉÅ Î≥ÄÍ≤Ω */}
                        {/*
                        <button 
                            onClick={() => handleStyleAndColorChange(
                                'hatStyle', 
                                avatarConfig.hatStyle === 'none' ? 'beanie' : avatarConfig.hatStyle === 'beanie' ? 'turban' : 'none',
                                'hatColor'
                            )} 
                            className="px-4 py-2 bg-white border border-gray-400 text-gray-600 rounded-md dark:bg-slate-600 dark:border-transparent dark:text-slate-400"
                        >
                            Î™®Ïûê
                        </button>
*/}
                        {/* Îàà Ïä§ÌÉÄÏùº Î≥ÄÍ≤Ω */}
                        {/*
                        <button onClick={() => handleChange('eyeStyle', avatarConfig.eyeStyle === 'circle' ? 'oval' : avatarConfig.eyeStyle === 'oval' ? 'smile' : 'circle')} className="px-4 py-2 bg-white border border-gray-400 text-gray-600 rounded-md dark:bg-slate-600 dark:border-transparent dark:text-slate-400">
                            Îàà
                        </button>
*/}
                        {/* ÏΩî Ïä§ÌÉÄÏùº Î≥ÄÍ≤Ω */}
                        {/*
                        <button onClick={() => handleChange('noseStyle', avatarConfig.noseStyle === 'short' ? 'long' : avatarConfig.noseStyle === 'long' ? 'round' : 'short')} className="px-4 py-2 bg-white border border-gray-400 text-gray-600 rounded-md dark:bg-slate-600 dark:border-transparent dark:text-slate-400">
                            ÏΩî
                        </button>
*/}
                        {/* ÏûÖ Ïä§ÌÉÄÏùº Î≥ÄÍ≤Ω */}
                        {/*
                        <button onClick={() => handleChange('mouthStyle', avatarConfig.mouthStyle === 'laugh' ? 'smile' : avatarConfig.mouthStyle === 'smile' ? 'peace' : 'laugh')} className="px-4 py-2 bg-white border border-gray-400 text-gray-600 rounded-md dark:bg-slate-600 dark:border-transparent dark:text-slate-400">
                            ÏûÖ
                        </button>
*/}
                        {/* ÏÖîÏ∏† Ïä§ÌÉÄÏùºÍ≥º ÏÉâÏÉÅ Î≥ÄÍ≤Ω */}
                        {/*
                        <button 
                            onClick={() => handleStyleAndColorChange(
                                'shirtStyle', 
                                avatarConfig.shirtStyle === 'hoody' ? 'short' : avatarConfig.shirtStyle === 'short' ? 'polo' : 'hoody',
                                'shirtColor'
                            )} 
                            className="px-4 py-2 bg-white border border-gray-400 text-gray-600 rounded-md dark:bg-slate-600 dark:border-transparent dark:text-slate-400"
                        >
                            ÏÖîÏ∏†
                        </button>
*/}
                        {/* Î∞∞Í≤Ω ÏÉâÏÉÅ Î≥ÄÍ≤Ω */}
                        {/*
                        <button onClick={() => randomizeColor('bgColor')} className="px-4 py-2 bg-white border border-gray-400 text-gray-600 rounded-md dark:bg-slate-600 dark:border-transparent dark:text-slate-400">
                            Î∞∞Í≤Ω
                        </button>
                    </div>*/}

                </div>
                <div className="flex flex-col space-y-4 dark:text-slate-400">
                    {/* Ï£ºÏÜå ÏûÖÎ†• ÌïÑÎìú */}
                    <InputField
                    label="Ï£ºÏÜå ÌÉÄÏûÖ"
                    id="address_type"
                    value={profile.address_type || ''}
                    onChange={(e) => setProfile({ ...profile, address_type: e.target.value })}
                    placeholder="Ïòà: ÏßëÏ£ºÏÜå, ÌöåÏÇ¨Ï£ºÏÜå, Î∞∞ÏÜ°ÏßÄ"
                    required
                    />
                    <InputField
                    label="Ï£ºÏÜå Î™ÖÏπ≠"
                    id="address_name"
                    value={profile.address_name || ''}
                    onChange={(e) => setProfile({ ...profile, address_name: e.target.value })}
                    placeholder="Ïòà: Ïö∞Ï£ºÏä§ÌéòÏù¥Ïä§"
                    required
                    />
                    <InputField
                    label="Í∏∞Î≥∏ Ï£ºÏÜå"
                    id="address_line1"
                    value={profile.address_line1 || ''}
                    onChange={(e) => setProfile({ ...profile, address_line1: e.target.value })}
                    placeholder="Ïòà: ÏÑúÏö∏Ïãú Í∞ïÎÇ®Íµ¨ Í∞ïÎÇ®ÎåÄÎ°ú62Í∏∏ 23"
                    required
                    />
                    <InputField
                    label="ÏÑ∏Î∂Ä Ï£ºÏÜå (ÏÑ†ÌÉù)"
                    id="address_line2"
                    value={profile.address_line2 || ''}
                    onChange={(e) => setProfile({ ...profile, address_line2: e.target.value })}
                    placeholder="Ïòà: Ïó≠ÏÇºÎπåÎî© 3Ï∏µ"
                    />
                    <InputField
                    label="Ïö∞Ìé∏Î≤àÌò∏"
                    id="postal_code"
                    value={profile.postal_code || ''}
                    onChange={(e) => setProfile({ ...profile, postal_code: e.target.value })}
                    placeholder="Ïö∞Ìé∏Î≤àÌò∏ ÏûÖÎ†•"
                    required
                    />

                    {/* Ïó∞ÎùΩÏ≤ò ÏûÖÎ†• ÌïÑÎìú */}
                    <InputField
                    label="Ï†ÑÌôî ÌÉÄÏûÖ"
                    id="phone_type"
                    value={profile.phone_type || ''}
                    onChange={(e) => setProfile({ ...profile, phone_type: e.target.value })}
                    placeholder="Ïòà: Í∞úÏù∏Ìú¥ÎåÄÌè∞, ÏóÖÎ¨¥Ïö©Ìú¥ÎåÄÌè∞, ÌöåÏÇ¨Ï†ÑÌôî"
                    required
                    />
                    <InputField
                    label="Ï†ÑÌôî Î≤àÌò∏"
                    id="phone_number"
                    value={profile.phone_number || ''}
                    onChange={(e) => setProfile({ ...profile, phone_number: e.target.value })}
                    placeholder="Ïòà: 010-0000-0000"
                    required
                    />
                    <InputField
                    label="ÎÇ¥ÏÑ† Î≤àÌò∏ (ÏÑ†ÌÉù)"
                    id="extension"
                    value={profile.extension || ''}
                    onChange={(e) => setProfile({ ...profile, extension: e.target.value })}
                    placeholder="ÎÇ¥ÏÑ† Î≤àÌò∏ (ÌöåÏÇ¨ Ï†ÑÌôîÏùº Í≤ΩÏö∞)"
                    />
                </div>
                </ProfileDrawer>
        </>
    )
}

export default Profile;